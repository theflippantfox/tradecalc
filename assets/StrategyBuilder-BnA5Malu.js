import{u as w,c as d,a as e,w as y,v as b,b as l,t as i,d as L,F as v,j as m,e as T,r as A,g as N,f,h as C,o as u,n as P}from"./index-Bd7vVtE-.js";import{C as g,A as $,D as F,Y as h,X as D,T as E,G as V}from"./useChartTheme-gAWqYwHT.js";const z={class:"card mb"},I={class:"g4 mb"},W={class:"field"},B={class:"field"},O={class:"field"},U={class:"field"},X={class:"g4"},Y={class:"sc red"},q={class:"sc-val red"},G={class:"sc teal"},j={class:"sc-val teal"},H={class:"sc green"},K={class:"sc-val green"},Z={class:"sc orange"},J={class:"sc-val orange"},Q={class:"card card-teal mb"},ee={class:"card mb"},te={style:{"overflow-x":"auto"}},se={class:"tbl"},ae={class:"teal",style:{"font-weight":"600"}},le={class:"alert alert-teal",style:{"margin-top":"14px","font-size":".78rem"}},oe={class:"card mb"},ie={class:"rules"},ne={class:"rule-num"},re={class:"card"},de={class:"rules"},ue={class:"rule-num"},me={__name:"StrategyBuilder",setup(ce){const a=w(),{fmtINR:c,fmt:R}=N(),p=A(2),k=f(()=>p.value>0?1/(1+p.value)*100:0),x=(n,t)=>n/100*t-(1-n/100)*1,_=f(()=>{const n=Array.from({length:19},(o,s)=>+(.5+s*.5).toFixed(1)),t=n.map(o=>+(1/(1+o)*100).toFixed(2));return{backgroundColor:"transparent",grid:V,tooltip:{...E,trigger:"axis",formatter:o=>`<div style="color:rgba(241,243,248,.4);font-size:.58rem;letter-spacing:1px;margin-bottom:6px">R:R = 1 : ${o[0].name}</div>Min Win Rate: <span style="color:${g.teal};font-weight:500">${o[0].value.toFixed(1)}%</span>`},xAxis:{...D,data:n.map(o=>`1:${o}`),name:"R:R Ratio",nameTextStyle:{color:"rgba(241,243,248,.25)",fontFamily:"DM Mono",fontSize:10}},yAxis:{...h,axisLabel:{...h.axisLabel,formatter:o=>`${o}%`},min:0,max:70},dataZoom:F,series:[{name:"Min Win Rate",type:"line",data:t,lineStyle:{color:g.teal,width:2.5},itemStyle:{color:g.teal},areaStyle:{color:$},symbolSize:5,smooth:!0,markLine:{silent:!0,symbol:"none",lineStyle:{color:g.orange,type:"dashed",width:1.5},data:[{yAxis:50,label:{formatter:"50% baseline",color:g.orange,fontFamily:"DM Mono",fontSize:10}}]}}]}}),S=f(()=>{const n=a.riskPct,t=p.value,o=a.capital;return["Stock has at least 5 lakh average daily volume (NSE). No illiquid small-caps.","Clear setup identified: Breakout, Pullback to support, or Range reversal.",`Minimum R:R of 1:${t} confirmed. Target is at least ${t}× the SL distance.`,`Maximum position risk is ${n}% of capital = ${o>0?c(o*n/100):"₹—"} per trade.`,"Stop loss is placed at entry. No SL = no trade. Non-negotiable.","Exit plan defined before entry: both profit target and SL levels are locked in.","Never move SL against the trade — you can trail it forward, never backward.",`Leverage at ${a.leverage}× max. Reduce leverage during losing streaks.`]}),M=f(()=>{const n=a.capital,t=a.riskPct;return a.leverage,[`Keep ≥50% in safe assets (FD, Liquid MF). Max trading allocation: ${n>0?c(n*.5):"₹—"}.`,"Start at 1× leverage. Increase only after 10+ consecutive trades with positive expectancy.",`Hard stop: If you hit ${R(t*3,1)}% drawdown in a single session, stop trading for the day.`,"Never average down on a losing position. Cut losses fast, let winners run.","Max 3 open positions at once. Focus and concentration beats over-diversification.","Maintain a trade journal. After every trade: note setup, entry reason, outcome, lesson.","Review your last 20 trades before adding any new position. Know your current win rate.","Separate trading capital from personal savings. Never trade money you can't afford to lose."]});return(n,t)=>{const o=C("VChart");return u(),d("div",null,[t[19]||(t[19]=e("div",{class:"ph"},[e("div",{class:"ph-icon"},"◎"),e("div",null,[e("div",{class:"ph-title"},"Strategy Builder"),e("div",{class:"ph-sub"},"Define your trading rules and understand the mathematics behind your edge.")])],-1)),e("div",z,[t[12]||(t[12]=e("div",{class:"card-label"},"Your Risk Parameters",-1)),e("div",I,[e("div",W,[t[4]||(t[4]=e("label",null,"Capital (₹)",-1)),y(e("input",{type:"number","onUpdate:modelValue":t[0]||(t[0]=s=>l(a).capital=s),placeholder:"e.g. 10000",step:"1000"},null,512),[[b,l(a).capital,void 0,{number:!0}]])]),e("div",B,[t[5]||(t[5]=e("label",null,"Max Risk / Trade (%)",-1)),y(e("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=s=>l(a).riskPct=s),placeholder:"e.g. 2",step:"0.1",min:"0.1",max:"10"},null,512),[[b,l(a).riskPct,void 0,{number:!0}]])]),e("div",O,[t[6]||(t[6]=e("label",null,"Max Leverage",-1)),y(e("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=s=>l(a).leverage=s),placeholder:"e.g. 2",step:"0.5",min:"1",max:"5"},null,512),[[b,l(a).leverage,void 0,{number:!0}]])]),e("div",U,[t[7]||(t[7]=e("label",null,"Min R:R Ratio",-1)),y(e("input",{type:"number","onUpdate:modelValue":t[3]||(t[3]=s=>p.value=s),placeholder:"e.g. 2",step:"0.5",min:"0.5",max:"10"},null,512),[[b,p.value,void 0,{number:!0}]])])]),e("div",X,[e("div",Y,[t[8]||(t[8]=e("div",{class:"sc-label"},"Max Risk / Trade",-1)),e("div",q,i(l(c)(l(a).capital*l(a).riskPct/100)),1)]),e("div",G,[t[9]||(t[9]=e("div",{class:"sc-label"},"Leveraged Power",-1)),e("div",j,i(l(c)(l(a).capital*l(a).leverage)),1)]),e("div",H,[t[10]||(t[10]=e("div",{class:"sc-label"},"Min Win Rate Needed",-1)),e("div",K,i(l(R)(k.value,1))+"%",1)]),e("div",Z,[t[11]||(t[11]=e("div",{class:"sc-label"},"Safe Trading Capital",-1)),e("div",J,i(l(c)(l(a).capital*.5)),1)])])]),e("div",Q,[t[13]||(t[13]=e("div",{class:"card-label"},"Minimum Win Rate Required at Each R:R Ratio",-1)),L(o,{option:_.value,autoresize:"",style:{height:"250px"}},null,8,["option"])]),e("div",ee,[t[16]||(t[16]=e("div",{class:"card-label"},"Expectancy Matrix — Win Rate × R:R",-1)),e("div",te,[e("table",se,[e("thead",null,[e("tr",null,[t[14]||(t[14]=e("th",null,"Win Rate →",-1)),(u(),d(v,null,m([35,40,45,50,55,60,65,70],s=>e("th",{key:s},i(s)+"%",1)),64))])]),e("tbody",null,[(u(),d(v,null,m([.5,1,1.5,2,2.5,3],s=>e("tr",{key:s},[e("td",ae,"R:R 1:"+i(s),1),(u(),d(v,null,m([35,40,45,50,55,60,65,70],r=>e("td",{key:r,class:P(x(r,s)>=0?"green":"red")},i(x(r,s)>=0?"+":"")+i(l(R)(x(r,s),2))+"% ",3)),64))])),64))])])]),e("div",le,[t[15]||(t[15]=e("strong",null,"How to read this:",-1)),T(" Each cell shows the per-trade expectancy. Green = positive edge (profitable long-term). Red = negative edge (losing long-term). Your setup with "+i(l(a).riskPct)+"% risk per trade at "+i(l(a).leverage)+"× leverage amplifies these outcomes. ",1)])]),e("div",oe,[t[17]||(t[17]=e("div",{class:"card-label"},"Pre-Trade Setup Checklist",-1)),e("ul",ie,[(u(!0),d(v,null,m(S.value,(s,r)=>(u(),d("li",{key:r,class:"rule-item"},[e("span",ne,i(r+1),1),e("span",null,i(s),1)]))),128))])]),e("div",re,[t[18]||(t[18]=e("div",{class:"card-label"},"Personal Trading Rules",-1)),e("ul",de,[(u(!0),d(v,null,m(M.value,(s,r)=>(u(),d("li",{key:r,class:"rule-item"},[e("span",ue,i(r+1),1),e("span",null,i(s),1)]))),128))])])])}}};export{me as default};
