import{u as E,c as y,a as l,n as F,w as i,v as n,b as u,k as C,F as B,t as f,d as N,l as I,r as d,g as O,f as S,h as X,o as x}from"./index-CtVat6kI.js";import{A as _,C as p,D as G,Y as R,X as Y,T as Z,G as q}from"./useChartTheme-DhzHdu0z.js";const j={class:"card mb"},H={class:"tg-row"},J={class:"g3 mb"},K={class:"field"},Q={class:"field"},W={class:"field"},ee={key:0,class:"field"},le={class:"field"},se={class:"field"},te={class:"field"},oe={class:"field"},ae={class:"field"},ie={class:"g4"},ne={class:"sc red"},re={class:"sc-val red"},de={class:"sc orange"},ue={class:"sc-val orange"},ve={class:"sc teal"},pe={class:"sc-val teal"},me={class:"sc green"},ce={class:"sc-val green"},be={class:"card card-teal mb"},Se={__name:"StopLoss",setup(ge){const v=E(),{fmtINR:M,fmt:P}=O(),t=d("pct"),a=d(""),k=d(""),L=d(""),T=d(2),A=d(""),w=d(.5),V=d(3),c=S(()=>{const r=a.value||0;return t.value==="pct"?+(r*(1-(k.value||0)/100)).toFixed(2):t.value==="atr"?+(r-(L.value||0)*(T.value||0)).toFixed(2):+((A.value||0)*(1-(w.value||0)/100)).toFixed(2)}),U=S(()=>(a.value||0)>0?(a.value-c.value)/a.value*100:0),h=S(()=>{const r=(a.value||0)-c.value;return r>0?Math.floor(v.capital*v.riskPct/100/r):0}),$=S(()=>{const r=a.value||100,e=(V.value||3)/100,m=Array.from({length:15},(o,b)=>b),s=m.map(o=>+(r*Math.pow(1.02,o)).toFixed(2)),z=m.map(()=>c.value),D=s.map(o=>+(o*(1-e)).toFixed(2));return{backgroundColor:"transparent",grid:q,tooltip:{...Z,trigger:"axis",formatter:o=>{let b=`<div style="color:rgba(241,243,248,.4);font-size:.58rem;margin-bottom:8px">${o[0].name}</div>`;return o.forEach(g=>{b+=`<div style="display:flex;align-items:center;gap:8px;margin-bottom:3px">
            <span style="width:8px;height:8px;border-radius:50%;background:${g.color};display:inline-block"></span>
            <span style="color:rgba(241,243,248,.5)">${g.seriesName}:</span>
            <strong style="color:${g.color}">₹${(g.value||0).toFixed(2)}</strong>
          </div>`}),b}},legend:{data:["Stock Price","Fixed SL","Trailing SL"],textStyle:{color:"rgba(241,243,248,.4)",fontFamily:"DM Mono",fontSize:11},top:0,right:8},xAxis:{...Y,data:m.map(o=>`Trade ${o+1}`)},yAxis:{...R,axisLabel:{...R.axisLabel,formatter:o=>`₹${o.toFixed(0)}`}},dataZoom:G,series:[{name:"Stock Price",type:"line",data:s,lineStyle:{color:p.teal,width:2.5},itemStyle:{color:p.teal},symbolSize:4,smooth:!0,areaStyle:{color:_}},{name:"Fixed SL",type:"line",data:z,lineStyle:{color:p.red,width:2,type:"dashed"},itemStyle:{color:p.red},showSymbol:!1},{name:"Trailing SL",type:"line",data:D,lineStyle:{color:p.green,width:2},itemStyle:{color:p.green},symbolSize:4,smooth:!0}]}});return(r,e)=>{const m=X("VChart");return x(),y("div",null,[e[26]||(e[26]=l("div",{class:"ph"},[l("div",{class:"ph-icon"},"⊘"),l("div",null,[l("div",{class:"ph-title"},"Stop Loss Calculator"),l("div",{class:"ph-sub"},"Set precise stop losses using %, ATR, or support level. Compare fixed vs trailing.")])],-1)),l("div",j,[l("div",H,[l("button",{class:F(["tg-btn",t.value==="pct"?"on":""]),onClick:e[0]||(e[0]=s=>t.value="pct")},"% Based",2),l("button",{class:F(["tg-btn",t.value==="atr"?"on":""]),onClick:e[1]||(e[1]=s=>t.value="atr")},"ATR Based",2),l("button",{class:F(["tg-btn",t.value==="support"?"on":""]),onClick:e[2]||(e[2]=s=>t.value="support")},"Support Level",2)]),l("div",J,[l("div",K,[e[12]||(e[12]=l("label",null,"Entry Price (₹)",-1)),i(l("input",{type:"number","onUpdate:modelValue":e[3]||(e[3]=s=>a.value=s),placeholder:"e.g. 250",step:"0.5"},null,512),[[n,a.value,void 0,{number:!0}]])]),l("div",Q,[e[13]||(e[13]=l("label",null,"Capital (₹)",-1)),i(l("input",{type:"number","onUpdate:modelValue":e[4]||(e[4]=s=>u(v).capital=s),placeholder:"e.g. 10000",step:"1000"},null,512),[[n,u(v).capital,void 0,{number:!0}]])]),l("div",W,[e[14]||(e[14]=l("label",null,"Risk / Trade (%)",-1)),i(l("input",{type:"number","onUpdate:modelValue":e[5]||(e[5]=s=>u(v).riskPct=s),placeholder:"e.g. 2",step:"0.1"},null,512),[[n,u(v).riskPct,void 0,{number:!0}]])]),t.value==="pct"?(x(),y("div",ee,[e[15]||(e[15]=l("label",null,"SL % Below Entry",-1)),i(l("input",{type:"number","onUpdate:modelValue":e[6]||(e[6]=s=>k.value=s),placeholder:"e.g. 5",step:"0.5"},null,512),[[n,k.value,void 0,{number:!0}]])])):C("",!0),t.value==="atr"?(x(),y(B,{key:1},[l("div",le,[e[16]||(e[16]=l("label",null,"ATR Value (₹)",-1)),i(l("input",{type:"number","onUpdate:modelValue":e[7]||(e[7]=s=>L.value=s),placeholder:"e.g. 8",step:"0.1"},null,512),[[n,L.value,void 0,{number:!0}]])]),l("div",se,[e[17]||(e[17]=l("label",null,"ATR Multiplier",-1)),i(l("input",{type:"number","onUpdate:modelValue":e[8]||(e[8]=s=>T.value=s),placeholder:"e.g. 2",step:"0.5",min:"0.5",max:"5"},null,512),[[n,T.value,void 0,{number:!0}]])])],64)):C("",!0),t.value==="support"?(x(),y(B,{key:2},[l("div",te,[e[18]||(e[18]=l("label",null,"Support Level (₹)",-1)),i(l("input",{type:"number","onUpdate:modelValue":e[9]||(e[9]=s=>A.value=s),placeholder:"e.g. 240",step:"0.5"},null,512),[[n,A.value,void 0,{number:!0}]])]),l("div",oe,[e[19]||(e[19]=l("label",null,"Buffer Below (%)",-1)),i(l("input",{type:"number","onUpdate:modelValue":e[10]||(e[10]=s=>w.value=s),placeholder:"e.g. 0.5",step:"0.1"},null,512),[[n,w.value,void 0,{number:!0}]])])],64)):C("",!0),l("div",ae,[e[20]||(e[20]=l("label",null,"Trailing SL (%)",-1)),i(l("input",{type:"number","onUpdate:modelValue":e[11]||(e[11]=s=>V.value=s),placeholder:"e.g. 3",step:"0.5"},null,512),[[n,V.value,void 0,{number:!0}]])])]),l("div",ie,[l("div",ne,[e[21]||(e[21]=l("div",{class:"sc-label"},"Stop Loss Price",-1)),l("div",re,"₹"+f(u(P)(c.value,2)),1)]),l("div",de,[e[22]||(e[22]=l("div",{class:"sc-label"},"SL Distance",-1)),l("div",ue,f(u(P)(U.value,2))+"%",1)]),l("div",ve,[e[23]||(e[23]=l("div",{class:"sc-label"},"Shares to Buy",-1)),l("div",pe,f(h.value),1)]),l("div",me,[e[24]||(e[24]=l("div",{class:"sc-label"},"Position Size",-1)),l("div",ce,f(u(M)(h.value*(a.value||0))),1)])])]),l("div",be,[e[25]||(e[25]=l("div",{class:"card-label"},"Fixed SL vs Trailing SL — Price Rising +2% per Trade",-1)),N(m,{option:$.value,autoresize:"",style:{height:"280px"}},null,8,["option"])]),e[27]||(e[27]=I('<div class="card"><div class="card-label">Stop Loss Methods</div><div class="slm"><div class="slm-item"><div class="slm-name">% Based</div><div class="slm-desc">Fixed % below entry. Simple, predictable. Best for beginners and high-volatility stocks. Easy to plan position size around.</div></div><div class="slm-item"><div class="slm-name">ATR Based</div><div class="slm-desc">ATR × multiplier adapts to the stock&#39;s natural volatility. Reduces premature stop-outs from normal price fluctuations.</div></div><div class="slm-item"><div class="slm-name">Support</div><div class="slm-desc">Place SL below a key support level with a 0.3–0.5% buffer. Most contextual method. Requires chart reading skill.</div></div><div class="slm-item"><div class="slm-name">Trailing</div><div class="slm-desc">SL moves up as price rises, locking in profits. Let winners run while protecting gains. Use only after trade is already profitable.</div></div></div></div>',1))])}}};export{Se as default};
