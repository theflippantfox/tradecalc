import{u as D,c as z,a as s,w as p,v as m,b as e,t as a,n as M,d as C,e as k,r as A,f as u,g as L,h as T,o as R}from"./index-Bd7vVtE-.js";import{C as v,A as w,D as I,Y as _,X as U,t as F,T as B,G as O}from"./useChartTheme-gAWqYwHT.js";const E={class:"card mb"},N={class:"g5 mb"},X={class:"field"},$={class:"field"},G={class:"field"},Y={class:"field"},Z={class:"field"},q={class:"g3 mb"},W={class:"big-stat"},j={class:"big-stat-val teal"},H={class:"big-stat"},J={class:"big-stat-val red"},K={class:"big-stat"},Q={class:"big-stat-val orange"},ss={class:"g4"},ts={class:"sc teal"},es={class:"sc-val teal"},ls={class:"sc grey"},as={class:"sc-val grey"},os={class:"sc grey"},is={class:"sc-val grey"},ns={class:"card card-teal mb"},rs={class:"alert alert-teal"},ps={__name:"PositionSizer",setup(ds){const l=D(),{fmtINR:r,fmt:b}=L(),i=A(""),d=A(""),P=u(()=>i.value>0?Math.abs((i.value-d.value)/i.value)*100:0),y=u(()=>l.capital*l.riskPct/100),S=u(()=>{const n=(i.value||0)-(d.value||0);return n>0?Math.floor(y.value/n):0}),f=u(()=>S.value*(i.value||0)),x=u(()=>{const n=l.capital*l.leverage;return n>0?f.value/n*100:0}),V=u(()=>{const n=[.5,1,1.5,2,2.5,3,4,5],t=(i.value||0)-(d.value||0),c=n.map(g=>{const h=l.capital*g/100;return t>0?Math.floor(h/t):0}),o=n.map((g,h)=>c[h]*(i.value||0));return{backgroundColor:"transparent",grid:{...O,right:72},tooltip:{...B,trigger:"axis",formatter:F},legend:{data:["Shares","Position ₹"],textStyle:{color:"rgba(241,243,248,.4)",fontFamily:"DM Mono",fontSize:11},top:0,right:8},xAxis:{...U,data:n.map(g=>`${g}%`)},yAxis:[{..._,position:"left",name:"Shares",nameTextStyle:{color:"rgba(241,243,248,.3)",fontFamily:"DM Mono",fontSize:10}},{..._,position:"right",name:"₹",nameTextStyle:{color:"rgba(241,243,248,.3)",fontFamily:"DM Mono",fontSize:10},axisLabel:{..._.axisLabel},splitLine:{show:!1}}],dataZoom:I,series:[{name:"Shares",type:"line",data:c,yAxisIndex:0,lineStyle:{color:v.teal,width:2.5},itemStyle:{color:v.teal},areaStyle:{color:w},symbolSize:6,smooth:!0,markLine:{silent:!0,symbol:"none",lineStyle:{color:v.orange,type:"dashed",width:1},data:[{xAxis:`${l.riskPct}%`,label:{formatter:`Current
${l.riskPct}%`,color:v.orange,fontFamily:"DM Mono",fontSize:10}}]}},{name:"Position ₹",type:"line",data:o,yAxisIndex:1,lineStyle:{color:v.orange,width:2},itemStyle:{color:v.orange},symbolSize:5,smooth:!0}]}});return(n,t)=>{const c=T("VChart");return R(),z("div",null,[t[21]||(t[21]=s("div",{class:"ph"},[s("div",{class:"ph-icon"},"⊡"),s("div",null,[s("div",{class:"ph-title"},"Position Sizer"),s("div",{class:"ph-sub"},"Calculate exact shares to buy without exceeding your risk limit.")])],-1)),s("div",E,[t[17]||(t[17]=s("div",{class:"card-label"},"Trade Parameters",-1)),s("div",N,[s("div",X,[t[5]||(t[5]=s("label",null,"Capital (₹)",-1)),p(s("input",{type:"number","onUpdate:modelValue":t[0]||(t[0]=o=>e(l).capital=o),placeholder:"e.g. 10000",step:"1000"},null,512),[[m,e(l).capital,void 0,{number:!0}]])]),s("div",$,[t[6]||(t[6]=s("label",null,"Risk / Trade (%)",-1)),p(s("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=o=>e(l).riskPct=o),placeholder:"e.g. 2",step:"0.1",min:"0.1",max:"20"},null,512),[[m,e(l).riskPct,void 0,{number:!0}]])]),s("div",G,[t[7]||(t[7]=s("label",null,"Leverage",-1)),p(s("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=o=>e(l).leverage=o),placeholder:"e.g. 1",step:"0.5",min:"1",max:"5"},null,512),[[m,e(l).leverage,void 0,{number:!0}]])]),s("div",Y,[t[8]||(t[8]=s("label",null,"Entry Price (₹)",-1)),p(s("input",{type:"number","onUpdate:modelValue":t[3]||(t[3]=o=>i.value=o),placeholder:"e.g. 250",step:"0.5"},null,512),[[m,i.value,void 0,{number:!0}]])]),s("div",Z,[t[9]||(t[9]=s("label",null,"Stop Loss (₹)",-1)),p(s("input",{type:"number","onUpdate:modelValue":t[4]||(t[4]=o=>d.value=o),placeholder:"e.g. 237",step:"0.5"},null,512),[[m,d.value,void 0,{number:!0}]])])]),s("div",q,[s("div",W,[t[10]||(t[10]=s("div",{class:"big-stat-label"},"Shares to Buy",-1)),s("div",j,a(S.value),1)]),s("div",H,[t[11]||(t[11]=s("div",{class:"big-stat-label"},"Max Risk Amount",-1)),s("div",J,a(e(r)(y.value)),1)]),s("div",K,[t[12]||(t[12]=s("div",{class:"big-stat-label"},"Position Value",-1)),s("div",Q,a(e(r)(f.value)),1)])]),s("div",ss,[s("div",ts,[t[13]||(t[13]=s("div",{class:"sc-label"},"SL Distance",-1)),s("div",es,a(e(b)(P.value,2))+"%",1)]),s("div",ls,[t[14]||(t[14]=s("div",{class:"sc-label"},"Leveraged Capital",-1)),s("div",as,a(e(r)(e(l).capital*e(l).leverage)),1)]),s("div",{class:M(["sc",x.value>100?"red":"green"])},[t[15]||(t[15]=s("div",{class:"sc-label"},"Capital Used",-1)),s("div",{class:M(["sc-val",x.value>100?"red":"green"])},a(e(b)(x.value,1))+"%",3)],2),s("div",os,[t[16]||(t[16]=s("div",{class:"sc-label"},"Margin Required",-1)),s("div",is,a(e(r)(f.value/e(l).leverage)),1)])])]),s("div",ns,[t[18]||(t[18]=s("div",{class:"card-label"},"Shares & Position Value vs Risk % · Scroll to zoom",-1)),C(c,{option:V.value,autoresize:"",style:{height:"250px"}},null,8,["option"])]),s("div",rs,[t[19]||(t[19]=s("strong",null,"Rule:",-1)),k(" With "+a(e(r)(e(l).capital))+" at "+a(e(l).riskPct)+"% risk — max loss = ",1),s("strong",null,a(e(r)(y.value)),1),t[20]||(t[20]=k(". Buy ",-1)),s("strong",null,a(S.value)+" shares",1),k(" at "+a(e(r)(i.value||0))+", SL at "+a(e(r)(d.value||0))+" ("+a(e(b)(P.value,1))+"% below entry). ",1)])])}}};export{ps as default};
