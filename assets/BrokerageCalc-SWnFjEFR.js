import{u as M,c as m,a as e,F as T,j as F,w,v as z,n as B,t as l,b as i,i as j,d as R,r as f,f as n,g as U,h as X,o as p}from"./index-CtVat6kI.js";import{C as b,a as $,D as q,Y,X as Z,t as Q,T as H,G as J}from"./useChartTheme-DhzHdu0z.js";const K={class:"card mb"},W={class:"btn-row"},ee=["onClick"],te={class:"btn-row"},se=["onClick"],ae={class:"g3"},le={class:"field"},oe={class:"field"},ne={class:"field"},re={class:"g2 mb"},ie={class:"card card-green"},ue={style:{"margin-top":"16px",display:"flex","flex-direction":"column",gap:"8px"}},de={style:{display:"flex","justify-content":"space-between","font-size":".8rem"}},ve={style:{display:"flex","justify-content":"space-between","font-size":".8rem"}},ce={style:{color:"var(--orange)","font-family":"var(--mono)"}},me={style:{display:"flex","justify-content":"space-between","font-size":".8rem"}},pe={style:{color:"var(--red)","font-family":"var(--mono)"}},ye={class:"card card-red"},ge={class:"big-stat-val red"},fe={style:{"margin-top":"14px"}},be={class:"cr-lbl",style:{"font-size":".78rem"}},he={class:"cr-val",style:{"font-size":".78rem"}},_e={class:"card card-teal"},Ce={__name:"BrokerageCalc",setup(xe){const A=M(),{fmtINR:h,fmt:_}=U(),G=["zerodha","upstox","angel","groww","icici","hdfc"],I=[{k:"delivery",l:"Delivery"},{k:"intraday",l:"Intraday"},{k:"futures",l:"F&O Futures"},{k:"options",l:"F&O Options"}],x=f("delivery"),u=f(""),y=f(""),r=f(""),k=n(()=>(u.value||0)*(r.value||0)),S=n(()=>(y.value||0)*(r.value||0)),C=n(()=>k.value+S.value),L=n(()=>{const a=x.value,t=a==="delivery"?0:3e-4,v=Math.min(k.value*t,20)+Math.min(S.value*t,20),o=(a==="delivery"?S.value:C.value/2)*(a==="delivery"?.001:25e-5),g=C.value*(a==="futures"||a==="options"?19e-7:322e-7),N=C.value*1e-6,O=(v+g)*.18,E=k.value*(a==="delivery"?15e-5:3e-5);return[{name:"Brokerage",val:v},{name:"STT / CTT",val:o},{name:"Exchange Fee",val:g},{name:"SEBI Charges",val:N},{name:"GST (18%)",val:O},{name:"Stamp Duty",val:E}]}),c=n(()=>L.value.reduce((a,t)=>a+t.val,0)),d=n(()=>((y.value||0)-(u.value||0))*(r.value||0)),P=n(()=>d.value-c.value),V=n(()=>(u.value||0)+((r.value||0)>0?c.value/r.value:0)),D=n(()=>{const a=u.value||0,t=r.value||0,v=c.value,s=Array.from({length:21},(o,g)=>+(a*(.88+g*.012)).toFixed(2));return{backgroundColor:"transparent",grid:J,tooltip:{...H,trigger:"axis",formatter:Q},legend:{data:["Gross P&L","Net P&L"],textStyle:{color:"rgba(241,243,248,.4)",fontFamily:"DM Mono",fontSize:11},top:0,right:8},xAxis:{...Z,data:s.map(o=>`₹${o.toFixed(0)}`)},yAxis:{...Y},dataZoom:q,series:[{name:"Gross P&L",type:"line",data:s.map(o=>+((o-a)*t).toFixed(2)),lineStyle:{color:b.blue,width:2},itemStyle:{color:b.blue},showSymbol:!1,smooth:!0,markLine:{silent:!0,symbol:"none",lineStyle:{color:"rgba(255,255,255,.1)",type:"dashed"},data:[{yAxis:0}]}},{name:"Net P&L",type:"line",data:s.map(o=>+((o-a)*t-v).toFixed(2)),lineStyle:{color:b.green,width:2.5},itemStyle:{color:b.green},showSymbol:!1,smooth:!0,areaStyle:{color:$}}]}});return(a,t)=>{const v=X("VChart");return p(),m("div",null,[t[12]||(t[12]=e("div",{class:"ph"},[e("div",{class:"ph-icon"},"₹"),e("div",null,[e("div",{class:"ph-title"},"Brokerage Calculator"),e("div",{class:"ph-sub"},"True net P&L after STT, exchange fees, GST, SEBI charges, and stamp duty.")])],-1)),e("div",K,[e("div",W,[(p(),m(T,null,F(G,s=>e("button",{key:s,class:B(["btn",i(A).broker===s?"on":""]),onClick:o=>i(A).broker=s},l(s.charAt(0).toUpperCase()+s.slice(1)),11,ee)),64))]),e("div",te,[(p(),m(T,null,F(I,s=>e("button",{key:s.k,class:B(["btn",x.value===s.k?"on":""]),onClick:o=>x.value=s.k},l(s.l),11,se)),64))]),e("div",ae,[e("div",le,[t[3]||(t[3]=e("label",null,"Buy Price (₹)",-1)),w(e("input",{type:"number","onUpdate:modelValue":t[0]||(t[0]=s=>u.value=s),placeholder:"e.g. 250",step:"0.5"},null,512),[[z,u.value,void 0,{number:!0}]])]),e("div",oe,[t[4]||(t[4]=e("label",null,"Sell Price (₹)",-1)),w(e("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=s=>y.value=s),placeholder:"e.g. 270",step:"0.5"},null,512),[[z,y.value,void 0,{number:!0}]])]),e("div",ne,[t[5]||(t[5]=e("label",null,"Quantity",-1)),w(e("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=s=>r.value=s),placeholder:"e.g. 100",step:"1"},null,512),[[z,r.value,void 0,{number:!0}]])])])]),e("div",re,[e("div",ie,[t[9]||(t[9]=e("div",{class:"big-stat-label",style:{"font-family":"var(--mono)","font-size":".6rem",color:"var(--t3)","letter-spacing":"1px","text-transform":"uppercase","margin-bottom":"8px"}},"Gross P&L",-1)),e("div",{class:B(["big-stat-val",d.value>=0?"green":"red"])},l(d.value>=0?"+":"")+l(i(h)(d.value)),3),e("div",ue,[e("div",de,[t[6]||(t[6]=e("span",{style:{color:"var(--t3)"}},"Net P&L",-1)),e("span",{style:j({color:P.value>=0?"var(--green)":"var(--red)",fontFamily:"var(--mono)"})},l(P.value>=0?"+":"")+l(i(h)(P.value)),5)]),e("div",ve,[t[7]||(t[7]=e("span",{style:{color:"var(--t3)"}},"Breakeven Price",-1)),e("span",ce,"₹"+l(i(_)(V.value,2)),1)]),e("div",me,[t[8]||(t[8]=e("span",{style:{color:"var(--t3)"}},"Charges Impact",-1)),e("span",pe,"-"+l(d.value!==0?i(_)(c.value/Math.abs(d.value)*100,2):"0.00")+"% of gross",1)])])]),e("div",ye,[t[10]||(t[10]=e("div",{class:"big-stat-label",style:{"font-family":"var(--mono)","font-size":".6rem",color:"var(--t3)","letter-spacing":"1px","text-transform":"uppercase","margin-bottom":"8px"}},"Total Charges",-1)),e("div",ge,l(i(h)(c.value)),1),e("div",fe,[(p(!0),m(T,null,F(L.value,s=>(p(),m("div",{class:"cr",key:s.name},[e("span",be,l(s.name),1),e("span",he,"₹"+l(i(_)(s.val,4)),1)]))),128))])])]),e("div",_e,[t[11]||(t[11]=e("div",{class:"card-label"},"Gross vs Net P&L across Sell Prices",-1)),R(v,{option:D.value,autoresize:"",style:{height:"270px"}},null,8,["option"])])])}}};export{Ce as default};
